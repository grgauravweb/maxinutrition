define(['Magento_Customer/js/customer-data','mage/url','uiComponent','Magento_Customer/js/action/login','mage/translate','knockout','jquery','mage/validation'],function(customerData,url,component,loginAction,$t,ko,$){return component.extend({registerUrl:window.ajaxLoginForm.customerRegisterUrl,forgotPasswordUrl:window.ajaxLoginForm.customerForgotPasswordUrl,logoutUrl:window.ajaxLoginForm.customerLogoutUrl,quickOrderUrl:window.ajaxLoginForm.baseUrl+'quickorder/',directOrderUrl:window.ajaxLoginForm.baseUrl+'quickorder/',myOrdersUrl:window.ajaxLoginForm.baseUrl+'sales/order/history/all/',recentOrdersUrl:window.ajaxLoginForm.baseUrl+'sales/order/history/',wishlistUrl:window.ajaxLoginForm.baseUrl+'requisition_list/requisition/',accountUrl:window.ajaxLoginForm.baseUrl+'customer/account/',customerDataUrl:window.ajaxLoginForm.baseUrl+'customer/account/edit',autocomplete:window.ajaxLoginForm.autocomplete,customer:customerData.get('customer'),isLoading:ko.observable(false),defaults:{dropdownTemplate:'Magento_Customer/my-account-link-dropdown'},initialize:function(){var event=new Event('form-reinit');var self=this;this._super();url.setBaseUrl(window.ajaxLoginForm.baseUrl);loginAction.registerLoginCallback(function(){self.isLoading(false);customerData.reload('customer');document.dispatchEvent(event);});},isLoggedIn:function(){return typeof this.customer().isLoggedIn!=='undefined'&&this.customer().isLoggedIn;},getDropdownTemplate:function(){return this.dropdownTemplate;},login:function(formUiElement,event){var loginData={},formElement=$(event.currentTarget),formDataArray=formElement.serializeArray();event.stopPropagation();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if(formElement.validation()&&formElement.validation('isValid')){this.isLoading(true);loginAction(loginData);}
return false;}});});