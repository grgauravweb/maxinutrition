/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={840:(t,e,i)=>{var n;!function(s,r,o,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=r.createElement("div"),d="function",u=Math.round,p=Math.abs,v=Date.now;function f(t,e,i){return setTimeout(b(t,i),e)}function m(t,e,i){return!!Array.isArray(t)&&(g(t,i[e],i),!0)}function g(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function y(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=s.console&&(s.console.warn||s.console.log);return r&&r.call(s.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var T=y((function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===a)&&(t[n[s]]=e[n[s]]),s++;return t}),"extend","Use `assign`."),E=y((function(t,e){return T(t,e,!0)}),"merge","Use `assign`.");function w(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&l(n,i)}function b(t,e){return function(){return t.apply(e,arguments)}}function x(t,e){return typeof t==d?t.apply(e&&e[0]||a,e):t}function R(t,e){return t===a?e:t}function S(t,e,i){g(I(e),(function(e){t.addEventListener(e,i,!1)}))}function A(t,e,i){g(I(e),(function(e){t.removeEventListener(e,i,!1)}))}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function L(t,e){return t.indexOf(e)>-1}function I(t){return t.trim().split(/\s+/g)}function O(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function _(t,e,i){for(var n=[],s=[],r=0;r<t.length;){var o=e?t[r][e]:t[r];O(s,o)<0&&n.push(t[r]),s[r]=o,r++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function $(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),r=0;r<c.length;){if((n=(i=c[r])?i+s:e)in t)return n;r++}return a}var D=1;function P(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||s}var U="ontouchstart"in s,N=$(s,"PointerEvent")!==a,k=U&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),H="touch",W="mouse",G=25,j=1,B=4,F=8,z=1,X=2,Y=4,q=8,V=16,Z=X|Y,J=q|V,Q=Z|J,K=["x","y"],tt=["clientX","clientY"];function et(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){x(t.options.enable,[t])&&i.handler(e)},this.init()}function it(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,r=e&j&&n-s==0,o=e&(B|F)&&n-s==0;i.isFirst=!!r,i.isFinal=!!o,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=nt(e)),s>1&&!i.firstMultiple?i.firstMultiple=nt(e):1===s&&(i.firstMultiple=!1);var r=i.firstInput,o=i.firstMultiple,l=o?o.center:r.center,c=e.center=st(n);e.timeStamp=v(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=lt(l,c),e.distance=at(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},r=t.prevInput||{};e.eventType!==j&&r.eventType!==B||(s=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}(i,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var h,d,u=rt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=p(u.x)>p(u.y)?u.x:u.y,e.scale=o?(h=o.pointers,at((d=n)[0],d[1],tt)/at(h[0],h[1],tt)):1,e.rotation=o?function(t,e){return lt(e[1],e[0],tt)+lt(t[1],t[0],tt)}(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,r,o=t.lastInterval||e,l=e.timeStamp-o.timeStamp;if(e.eventType!=F&&(l>G||o.velocity===a)){var c=e.deltaX-o.deltaX,h=e.deltaY-o.deltaY,d=rt(l,c,h);n=d.x,s=d.y,i=p(d.x)>p(d.y)?d.x:d.y,r=ot(c,h),t.lastInterval=e}else i=o.velocity,n=o.velocityX,s=o.velocityY,r=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=r}(i,e);var f=t.element;C(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function nt(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:v(),pointers:e,center:st(e),deltaX:t.deltaX,deltaY:t.deltaY}}function st(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,s=0;s<e;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:u(i/e),y:u(n/e)}}function rt(t,e,i){return{x:e/t||0,y:i/t||0}}function ot(t,e){return t===e?z:p(t)>=p(e)?t<0?X:Y:e<0?q:V}function at(t,e,i){i||(i=K);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function lt(t,e,i){i||(i=K);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(P(this.element),this.evWin,this.domHandler)}};var ct={mousedown:j,mousemove:2,mouseup:B},ht="mousedown",dt="mousemove mouseup";function ut(){this.evEl=ht,this.evWin=dt,this.pressed=!1,et.apply(this,arguments)}w(ut,et,{handler:function(t){var e=ct[t.type];e&j&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=B),this.pressed&&(e&B&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:W,srcEvent:t}))}});var pt={pointerdown:j,pointermove:2,pointerup:B,pointercancel:F,pointerout:F},vt={2:H,3:"pen",4:W,5:"kinect"},ft="pointerdown",mt="pointermove pointerup pointercancel";function gt(){this.evEl=ft,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(ft="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),w(gt,et,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=pt[n],r=vt[t.pointerType]||t.pointerType,o=r==H,a=O(e,t.pointerId,"pointerId");s&j&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):s&(B|F)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var yt={touchstart:j,touchmove:2,touchend:B,touchcancel:F};function Tt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function Et(t,e){var i=M(t.touches),n=M(t.changedTouches);return e&(B|F)&&(i=_(i.concat(n),"identifier",!0)),[i,n]}w(Tt,et,{handler:function(t){var e=yt[t.type];if(e===j&&(this.started=!0),this.started){var i=Et.call(this,t,e);e&(B|F)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:H,srcEvent:t})}}});var wt={touchstart:j,touchmove:2,touchend:B,touchcancel:F},bt="touchstart touchmove touchend touchcancel";function xt(){this.evTarget=bt,this.targetIds={},et.apply(this,arguments)}function Rt(t,e){var i=M(t.touches),n=this.targetIds;if(e&(2|j)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,r,o=M(t.changedTouches),a=[],l=this.target;if(r=i.filter((function(t){return C(t.target,l)})),e===j)for(s=0;s<r.length;)n[r[s].identifier]=!0,s++;for(s=0;s<o.length;)n[o[s].identifier]&&a.push(o[s]),e&(B|F)&&delete n[o[s].identifier],s++;return a.length?[_(r.concat(a),"identifier",!0),a]:void 0}w(xt,et,{handler:function(t){var e=wt[t.type],i=Rt.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:H,srcEvent:t})}});var St=2500;function At(){et.apply(this,arguments);var t=b(this.handler,this);this.touch=new xt(this.manager,t),this.mouse=new ut(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t,e){t&j?(this.primaryTouch=e.changedPointers[0].identifier,Lt.call(this,e)):t&(B|F)&&Lt.call(this,e)}function Lt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),St)}}function It(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],r=Math.abs(e-s.x),o=Math.abs(i-s.y);if(r<=25&&o<=25)return!0}return!1}w(At,et,{handler:function(t,e,i){var n=i.pointerType==H,s=i.pointerType==W;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)Ct.call(this,e,i);else if(s&&It.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ot=$(h.style,"touchAction"),Mt=Ot!==a,_t="compute",$t="auto",Dt="manipulation",Pt="none",Ut="pan-x",Nt="pan-y",kt=function(){if(!Mt)return!1;var t={},e=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||s.CSS.supports("touch-action",i)})),t}();function Ht(t,e){this.manager=t,this.set(e)}Ht.prototype={set:function(t){t==_t&&(t=this.compute()),Mt&&this.manager.element.style&&kt[t]&&(this.manager.element.style[Ot]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){x(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(L(t,Pt))return Pt;var e=L(t,Ut),i=L(t,Nt);return e&&i?Pt:e||i?e?Ut:Nt:L(t,Dt)?Dt:$t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,s=L(n,Pt)&&!kt[Pt],r=L(n,Nt)&&!kt[Nt],o=L(n,Ut)&&!kt[Ut];if(s){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!o||!r)return s||r&&i&Z||o&&i&J?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Wt=1,Gt=32;function jt(t){this.options=l({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=R(this.options.enable,!0),this.state=Wt,this.simultaneous={},this.requireFail=[]}function Bt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Ft(t){return t==V?"down":t==q?"up":t==X?"left":t==Y?"right":""}function zt(t,e){var i=e.manager;return i?i.get(t):t}function Xt(){jt.apply(this,arguments)}function Yt(){Xt.apply(this,arguments),this.pX=null,this.pY=null}function qt(){Xt.apply(this,arguments)}function Vt(){jt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Xt.apply(this,arguments)}function Jt(){Xt.apply(this,arguments)}function Qt(){jt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Kt(t,e){return(e=e||{}).recognizers=R(e.recognizers,Kt.defaults.preset),new te(t,e)}function te(t,e){this.options=l({},Kt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(N?gt:k?xt:U?At:ut))(this,it),this.touchAction=new Ht(this,this.options.touchAction),ee(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var i,n=t.element;n.style&&(g(t.options.cssProps,(function(s,r){i=$(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=s):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}jt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=zt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=zt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===O(e,t=zt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=zt(t,this);var e=O(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Bt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Bt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Gt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Gt|Wt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!x(this.options.enable,[this,e]))return this.reset(),void(this.state=Gt);56&this.state&&(this.state=Wt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(Xt,jt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,s=this.attrTest(t);return n&&(i&F||!s)?16|e:n||s?i&B?8|e:2&e?4|e:2:Gt}}),w(Yt,Xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var t=this.options.direction,e=[];return t&Z&&e.push(Nt),t&J&&e.push(Ut),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,r=t.deltaX,o=t.deltaY;return s&e.direction||(e.direction&Z?(s=0===r?z:r<0?X:Y,i=r!=this.pX,n=Math.abs(t.deltaX)):(s=0===o?z:o<0?q:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return Xt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ft(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(qt,Xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Pt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Vt,jt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[$t]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(B|F)&&!s)this.reset();else if(t.eventType&j)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&B)return 8;return Gt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&B?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),w(Zt,Xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Pt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(Jt,Xt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|J,pointers:1},getTouchAction:function(){return Yt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Z|J)?e=t.overallVelocity:i&Z?e=t.overallVelocityX:i&J&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&B},emit:function(t){var e=Ft(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Qt,jt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&j&&0===this.count)return this.failTimeout();if(n&&s&&i){if(t.eventType!=B)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Gt},failTimeout:function(){return this._timer=f((function(){this.state=Gt}),this.options.interval,this),Gt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Kt.VERSION="2.0.7",Kt.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[qt,{enable:!1},["rotate"]],[Jt,{direction:Z}],[Yt,{direction:Z},["swipe"]],[Qt],[Qt,{event:"doubletap",taps:2},["tap"]],[Vt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,s=e.curRecognizer;(!s||s&&8&s.state)&&(s=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&14&i.state&&(s=e.curRecognizer=i),r++}},get:function(t){if(t instanceof jt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=O(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return g(I(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return g(I(t),(function(t){e?i[t]&&i[t].splice(O(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=r.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Kt,{INPUT_START:j,INPUT_MOVE:2,INPUT_END:B,INPUT_CANCEL:F,STATE_POSSIBLE:Wt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Gt,DIRECTION_NONE:z,DIRECTION_LEFT:X,DIRECTION_RIGHT:Y,DIRECTION_UP:q,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:J,DIRECTION_ALL:Q,Manager:te,Input:et,TouchAction:Ht,TouchInput:xt,MouseInput:ut,PointerEventInput:gt,TouchMouseInput:At,SingleTouchInput:Tt,Recognizer:jt,AttrRecognizer:Xt,Tap:Qt,Pan:Yt,Swipe:Jt,Pinch:qt,Rotate:Zt,Press:Vt,on:S,off:A,each:g,merge:E,extend:T,assign:l,inherit:w,bindFn:b,prefixed:$}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=Kt,(n=function(){return Kt}.call(e,i,e,t))===a||(t.exports=n)}(window,document)},426:()=>{window.requestIdleCallback=window.requestIdleCallback||function(t){const e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=async t=>JSON.parse(await(async t=>new Promise(((e,i)=>{const n=new XMLHttpRequest;n.onload=()=>{e(n.responseText)},n.onerror=()=>{i(new Error("Local request failed"))},n.open("GET",t),n.send()})))(t)),e=new Map,n=async(i,n)=>{const s=`${i}/assets/locales/${n}.json`;if(!e.has(s)){const i=await t(s);i&&e.set(s,i)}return e.get(s)},s=(t,e,i=0,n=0)=>new Intl.NumberFormat(t,{minimumFractionDigits:i,maximumFractionDigits:n}).format(e),r=t=>(e,i,n)=>{const r=new RegExp(`{${i},[ ]*number}`,"g");return e.replaceAll(r,s(t,+n))},o=(t,e,i)=>{const n=new RegExp(`{${e}, plural, .+?}}`,"g");let s=new RegExp("=0[ ]*{(.*?)}","g");const r=+i;1===r?s=new RegExp("one[ ]*{(.*?)}","g"):r>1&&(s=new RegExp("other[ ]*{(.*?)}","g"));const o=s.exec(t);return o?t.replaceAll(n,o[1].replace("#",i)):t},a=(t,e,i)=>t.replaceAll(`{${e}}`,i),l=(t,e,i)=>{const n=new RegExp(`{${e}, select, .+?}[ ]*}`,"g"),s=new RegExp(`${i}[ ]*{(.*?)}`,"g").exec(t);return s?t.replaceAll(n,s[1]):t},c=async(t,e,i,s)=>{let c;try{if(c=await n(t,e),!c)throw new Error(`Could not find ${e} object`)}catch(e){c=await n(t,"en-GB")}if(!c)return i;let h=c[i];return h||(h=i.split(".").reduce(((t,e)=>t[e]),c)),h&&((t,e,i)=>{if(!e||!i)return e;const n=[o,r(t),a,l];return Object.entries(i).reduce(((t,[e,i])=>n.reduceRight(((t,n)=>n(t,e,i)),t)),e)})(e,h,s)||i},h=t=>e=>{customElements.get(t.selector)||customElements.define(t.selector,e)};const d=e=>{return i=void 0,n=void 0,r=function*(){const i=yield t(e);if("object"==typeof i&&0===Object.keys(i).length)throw new Error("Server returned empty object!");return i},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{l(r.next(t))}catch(t){e(t)}}function a(t){try{l(r.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}l((r=r.apply(i,n||[])).next())}));var i,n,s,r};var u;!function(t){t.STATIC="static",t.FOCUSED="focused",t.REDUCED="reduced"}(u||(u={}));const p=u;var v;!function(t){t.EXCELLENT="EXCELLENT",t.GOOD="GOOD",t.FAIR="FAIR",t.POOR="POOR",t.VERY_POOR="VERY_POOR"}(v||(v={}));const f=v;var m,g=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let y=m=class extends HTMLElement{constructor(t,e,i,n,s,r=0){super(),this.context=t,this.tile=e,this.tileDisplayMode=i,this.focusMode=n,this.displaySize=s,this.index=r}connectedCallback(){return g(this,void 0,void 0,(function*(){yield this.render(this.tile,this.tileDisplayMode,this.displaySize),this.addEventListener("click",(()=>{this.context.settings.focusWrapper.open(this.tile,this)}))}))}disconnectedCallback(){removeEventListener("click",(()=>{this.context.settings.focusWrapper.open(this.tile,this)}))}updateSize(t){this.classList.add(`tile-${t.toLowerCase()}`)}render(t,e,i){return g(this,void 0,void 0,(function*(){const{baseUrl:n,settings:{locale:s}}=this.context,r=e===p.FOCUSED;this.classList.add("grade-tile"),this.classList.add("tile"),this.classList.add(`grade-tile-${e.toLowerCase()}`),this.setAttribute("data-etrusted-tile-id","grade"),this.setAttribute("data-etrusted-tile-index",String(this.index)),i&&this.classList.add(`tile-${i.toLowerCase()}`);const[o]=r?yield this.getFullTile(t,n,s):yield m.getSimpleTile(t,n,s);this.innerHTML=`\n          <div class="summary-rating">\n            <etrusted-rc-star-rating\n              baseUrl="${n}"\n              rating="${t.grade}"\n            ></etrusted-rc-star-rating>\n          </div>\n          ${o}\n       `}))}static getSimpleTile(t,e,i){return g(this,void 0,void 0,(function*(){var n;return[`\n          <div class="summary-headline">${s(i,t.grade,2,2)}</div>\n          <span class="summary-grade">${yield c(e,i,"gradeSummary",{gradeSummary:(n=t.grade,n<1.5?f.VERY_POOR:n<2.5?f.POOR:n<3.5?f.FAIR:n<4.5?f.GOOD:f.EXCELLENT)})}</span>\n          <span class="summary-logo"></span>\n    `]}))}getFullTile(t,e,i){return g(this,void 0,void 0,(function*(){const n=yield c(e,i,"shopSummary.headline",{grade:s(i,t.grade,2,2),maxGrade:"5",number:s(i,t.count,2,2)}),r=yield c(e,i,"shopSummary.body",{totalReviewCount:s(i,t.overallCount,0,0),yearReviewCount:s(i,t.count,0,0),seoProfileUrl:this.context.channel.seoProfileUrl}),o=yield c(e,i,"shopSummary.authenticity");return[` \n                  <div class="summary-headline">${n}</div>\n                  <div class="summary-body">\n                    ${r}\n                   </div>\n                  <div class="summary-authenticity">\n                    <a target="_blank" class="authenticity-link"\n                      href="${this.context.channel.seoProfileUrl}#legal"\n                    >${o}</a>\n                  </div>\n                `]}))}};y=m=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel-grade-tile"})],y);const T=(t,e)=>{const i=new Intl.RelativeTimeFormat(t,{numeric:"auto"}),n=new Date,s=new Date(e),r=s.getTime()-n.getTime(),o=Math.trunc(r/1e3),a=Math.abs(o);let l=o,c="second";if(a>=60&&a<3600)l=Math.trunc(o/60),c="minute";else if(a>3600&&a<86400)l=Math.trunc(o/3600),c="hour";else if(a>=86400&&a<604800)l=Math.trunc(o/86400),c="day";else if(a>604800)return s.toLocaleDateString(t);return i.format(l,c)};let E=class extends HTMLElement{constructor(t=3){super(),this.ellipsis="...",this.lines=3,this.isTruncated=!1,this.lines=t}connectedCallback(){this.maxAvailableHeight=parseInt(window.getComputedStyle(this).lineHeight,10)*this.lines,this.isTruncated=this.needToTruncate(this),this.style.height=`${this.maxAvailableHeight}px`,this.isTruncated&&this.truncate(this),this.setAttribute("data-truncated",`${this.isTruncated}`),this.render(this.isTruncated)}needToTruncate(t){const e=t.scrollHeight,i=t.scrollWidth;return e>this.maxAvailableHeight||i>this.maxAvailableWidth}truncate(t){var e;const i=this.childNodes[0];null===(e=i.textContent)||void 0===e||e.split(" ").some(((e,i)=>{const n=0===i?"":t.textContent,s=`${n} ${e}`;return t.innerText=s,t.scrollHeight>this.maxAvailableHeight&&(t.innerText=n.slice(0,-4),!0)})),0===i.textContent.length&&t.removeChild(i)}render(t){this.textContent=`${this.textContent}${t?this.ellipsis:""}`}};E=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel-text-clamp"})],E);const w=E;var b,x=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let R=b=class extends HTMLElement{constructor(t,e,i,n,s,r=0){super(),this.context=t,this.tile=e,this.tileDisplayMode=i,this.focusMode=n,this.displaySize=s,this.index=r,this.clickListener=()=>{this.context.settings.focusWrapper.open(this.tile,this)},this.isTruncated=!1,this.rendered=!1}connectedCallback(){return x(this,void 0,void 0,(function*(){this.rendered||(yield this.render(this.tile,this.tileDisplayMode,this.displaySize),this.updateGallery(this.tile),this.tileDisplayMode===p.REDUCED&&this.addEventListener("click",this.clickListener))}))}disconnectedCallback(){removeEventListener("click",this.clickListener)}updateSize(t){var e;const i=null!==(e=this.displaySize)&&void 0!==e?e:"";this.displaySize=t,this.classList.remove(`tile-${i.toLowerCase()}`),this.classList.add(`tile-${t.toLowerCase()}`)}getGallery(){const{baseUrl:t,settings:{theme:e,locale:i}}=this.context,n=document.createElement("etrusted-widget-image-gallery");n.outsideModal=this.context.settings.focusGallery,n.alwaysUpdate=!1,n.setAttribute("data-locale",i),n.setAttribute("data-base-url",t),n.setAttribute("data-theme",e),n.classList.add("gallery",this.tile.id),this.gallery=n}updateGallery(t){var e,i;this.gallery&&(this.gallery.data={review:Object.assign(Object.assign({},t),{isVerified:!0,consumer:{firstName:null!==(i=null===(e=t.consumer)||void 0===e?void 0:e.firstName)&&void 0!==i?i:""},images:t.images?t.images.map((t=>({id:t.id,url:t.original.url}))):[]})})}render(t,e,i){return x(this,void 0,void 0,(function*(){const{baseUrl:n,channel:{name:s},settings:{locale:r}}=this.context,o=e===p.FOCUSED;this.classList.add("review-tile"),this.classList.add("tile"),this.classList.add(`review-tile-${e.toLowerCase()}`),this.setAttribute("data-etrusted-tile-id",t.id),this.setAttribute("data-etrusted-tile-index",String(this.index)),i&&this.classList.add(`tile-${i.toLowerCase()}`),this.context.settings.showUGC&&t.images&&this.getGallery(),yield this.getHeader(t,n,r,o),yield this.getSubline(t,n,r,o),yield this.getBody(t,n,r,s,o),this.append(this.header,this.subline,this.body),this.isTruncated="true"===this.querySelector(".text").getAttribute("data-truncated"),yield this.getFooter(t,n,r,o),this.append(this.footer),this.rendered=!0}))}getHeader(t,e,i,n){return x(this,void 0,void 0,(function*(){if(this.header)return;const s=yield c(e,i,"imported.short");if(this.header=document.createElement("div"),this.header.classList.add("headline"),n)this.header.innerHTML=`<etrusted-rc-star-rating baseUrl="${e}" rating="${t.rating}"></etrusted-rc-star-rating>`;else{const i=t.isVerified?'<span class="verified-icon"></span>':`<span class="imported">${s}</span>`;this.header.innerHTML=`\n      <etrusted-rc-star-rating baseUrl="${e}" rating="${t.rating}"></etrusted-rc-star-rating>\n      ${i}\n      `}}))}getSubline(t,e,i,n){return x(this,void 0,void 0,(function*(){if(this.subline)return;let s="";const r=yield c(e,i,"review.writtenBy");if(t.consumer){const{firstName:e,lastName:i}=t.consumer;s=`${r}${e?" "+e:""}${i?" "+i:""}`}const o=T(i,t.date).trim();if(this.subline=document.createElement("div"),this.subline.classList.add("subline"),this.subline.innerHTML=`${o} ${s}`,n){const n=yield c(e,i,"review.modal.verifiedExplanation"),s=yield c(e,i,"imported.tooltip"),r=yield c(e,i,t.isVerified?"verifiedCopy":"imported.long"),o=t.isVerified?n:s;this.subline.innerHTML=`\n                   <etrusted-rc-tooltip content="${o}">\n                      <span class="review-${t.isVerified?"verifeid":"imported"}">\n                        <span class="icon"></span>\n                        <span>\n                          ${r}\n                        </span>\n                      </span>\n                    </etrusted-rc-tooltip>`}else this.subline.classList.add("first-line")}))}static getReply(t,e,i,n){var s,r;return x(this,void 0,void 0,(function*(){const o=t.reply?T(i,null===(s=t.reply)||void 0===s?void 0:s.date).trim():void 0,a=yield c(e,i,"review.modal.replyFrom");return t.reply?`<div class="reply">\n            <span class="reply-icon"></span>\n            <span class="reply-headline">\n              ${a} ${n}\n            </span>\n            <span class="reply-date">${null!=o?o:""}</span>\n            <img class="reply-comment-marker">\n            <div class="reply-comment">\n              ${null===(r=t.reply)||void 0===r?void 0:r.comment}\n            </div>\n          </div>`:""}))}getBody(t,e,i,n,s){var r,o;return x(this,void 0,void 0,(function*(){if(!this.body)if(this.body=document.createElement("div"),this.body.classList.add("content"),s){const s=document.createElement("div");s.classList.add("scroll-wrapper");const r=t.title?`<span class="title">${t.title}</span>`:"",o=`<div class="text">${t.comment}</div>`,a=t.reply?yield b.getReply(t,e,i,n):"";s.innerHTML=`${r}${o}${a}`,this.gallery&&s.append(this.gallery),this.body.replaceChildren(s)}else{const e=t.title&&!(null===(r=t.comment)||void 0===r?void 0:r.startsWith(t.title.trim()))?`<span class="title">${t.title}</span>`:"",i=t.images?e.trim().length>0&&t.comment?1:2:3,n=new w(i);n.classList.add("text",String(i)),n.innerHTML=null!==(o=t.comment)&&void 0!==o?o:"",this.body.innerHTML=`${e}`,this.body.append(n),this.gallery&&this.body.append(this.gallery)}}))}getFooter(t,e,i,n){return x(this,void 0,void 0,(function*(){this.footer=document.createElement("div"),this.footer.classList.add("footer");const s=yield c(e,i,"readAnswer"),r=yield c(e,i,"readMore"),o=yield c(e,i,"review.modal.linkTitle");n?this.footer.innerHTML=`<a target="_blank" href="${this.context.channel.seoProfileUrl}">${o}</a><span class="shop-link"></span>`:t.reply?this.footer.innerHTML=`<span class="read-reply"></span> ${s}`:this.isTruncated&&(this.footer.innerHTML=r)}))}};R=b=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel-review-tile"})],R);var S;!function(t){t.CENTER="center",t.LEFT="left",t.RIGHT="right"}(S||(S={}));let A=class extends HTMLElement{constructor(){super(...arguments),this.ATTRIBUTE_CONTENT="content",this.ATTRIBUTE_ORIENTATION="orientation"}connectedCallback(){return t=this,e=void 0,n=function*(){this.content=this.getAttribute(this.ATTRIBUTE_CONTENT)||"",this.orientation=this.getAttribute(this.ATTRIBUTE_ORIENTATION)||S.CENTER,requestIdleCallback((()=>{this.addEventListener("mouseenter",(()=>this.open())),this.addEventListener("mouseleave",(()=>this.close()))}))},new((i=void 0)||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}open(){this.render()}close(){this.removeChild(this.toolTipContainer)}setPosition(t){const e=this.children[0],i=-this.toolTipContainer.offsetWidth/2+e.getBoundingClientRect().width/2;t.style.left=`${i}px`}render(){this.toolTipContainer=document.createElement("div"),this.toolTipContainer.classList.add("tooltip-wrapper"),this.toolTipContainer.classList.add(this.orientation),this.toolTipContainer.innerHTML=`\n      <div class="tooltip">\n        <span>${this.content}</span>\n      </div>\n    `,this.appendChild(this.toolTipContainer),this.setPosition(this.toolTipContainer)}};var C;A=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-tooltip"})],A),function(t){t.RELATIVE="relative",t.CENTERED="centered"}(C||(C={}));const L=C;var I=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let O=class extends HTMLElement{constructor(){super(...arguments),this.smallDisplaySizeMaxWidth=599,this.scaleWidth=1.4241}connectedCallback(){this.host=this.getRootNode().host,this.context=this.host.getContext(),this.animationDuration=this.context.settings.animationDurationFocus,this.eventListener=t=>{this.isOutSideClick(t)},this.focusWrapper=this.context.settings.focusWrapper,window.addEventListener("click",this.eventListener)}disconnectedCallback(){window.removeEventListener("click",this.eventListener)}isOutSideClick(t){var e;return I(this,void 0,void 0,(function*(){t.target&&this.focusElement&&(null===(e=this.animation)||void 0===e?void 0:e.currentTime)===this.context.settings.animationDurationFocus&&(this.focusWrapper.contains(t.composedPath()[0])||(yield this.close()))}))}open(t,e){return I(this,void 0,void 0,(function*(){this.animation&&this.animation.currentTime===this.animationDuration&&(yield this.close()),yield this.render(t),setTimeout((()=>{this.animateTile((t.id,e))}),20)}))}close(){var t,e,i,n;return I(this,void 0,void 0,(function*(){"finished"===(null===(t=this.animation)||void 0===t?void 0:t.playState)&&0!==(null===(e=this.animation)||void 0===e?void 0:e.currentTime)&&(null===(i=this.animation)||void 0===i||i.reverse(),yield null===(n=this.animation)||void 0===n?void 0:n.finished)}))}getDimensions(t){const e=t.getBoundingClientRect(),i=this.host.getBoundingClientRect();return{elementX:e.x-i.x,elementY:e.y-i.y,elementWidth:t.offsetWidth,elementHeight:t.offsetHeight,wrapperX:i.left,wrapperY:i.top,wrapperWidth:i.width,wrapperHeight:i.height}}getAnimationDimensions(t){return I(this,void 0,void 0,(function*(){const e=this.getDimensions(t),{width:i,height:n,fullscreen:s}=this.getMaxSize(this.focusElement,e.elementWidth,t.focusMode);let r=e.wrapperWidth/2-(s?i:this.focusWrapper.offsetWidth)/2,o={left:r,top:e.wrapperHeight/2-n/2,height:n};return(t.focusMode===L.RELATIVE||s)&&(r=s?-1*e.wrapperX:e.elementX-(i-e.elementWidth)/2,o.left=r+i>innerWidth?r+(innerWidth-(r+i)):r,o.top=Math.abs(e.elementHeight-n)/2>e.wrapperY?-1*e.wrapperY:(e.elementHeight-n)/2,o=Object.assign(Object.assign({},o),{width:i})),o}))}setAniamtionStyles(t){this.focusWrapper.style.removeProperty("maxWidth"),Object.entries(t).forEach((([t,e])=>{this.focusWrapper.style[t]=e?`${"number"==typeof e?`${e}px`:e}`:""}))}prepareTileStyles(t,e){e.style.pointerEvents=t?"none":"all",this.focusWrapper.style.display=t?"block":"none",this.focusWrapper.style.pointerEvents=t?"all":"none"}animateTile(t){return I(this,void 0,void 0,(function*(){this.prepareTileStyles(!0,t);const e=yield this.getAnimationDimensions(t);this.setAniamtionStyles(e);this.animation=this.focusWrapper.animate([{transform:"scale(0.6)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:this.animationDuration,fill:"both"}),this.animation.onfinish=({currentTarget:e})=>{this.prepareTileStyles(e.playbackRate>0,t)}}))}getMaxSize(t,e,i){const n=e*this.scaleWidth,s=window.innerWidth,r=s>this.smallDisplaySizeMaxWidth?Math.min(s,n):s,o=s<n||s<=this.smallDisplaySizeMaxWidth;return this.setAniamtionStyles(o?{width:r,maxWidth:""}:{maxWidth:i===L.RELATIVE?r:"27em"}),{height:t.clientHeight,width:r,fullscreen:o}}resetFocusWrapper(){this.focusElement&&this.focusElement.remove(),this.focusWrapper.style.removeProperty("width"),this.focusWrapper.style.removeProperty("height"),this.focusWrapper.style.removeProperty("top"),this.focusWrapper.style.removeProperty("left"),this.focusWrapper.style.removeProperty("maxWidth")}render(t){var e;return I(this,void 0,void 0,(function*(){const i="grade"===t.id;this.resetFocusWrapper(),this.focusElement=document.createElement("div"),this.focusElement.classList.add("focused-tile"),this.focusElement.classList.add(i?"focused-tile-grade":"focused-tile-review"),this.focusElement.innerHTML='<div class="close-button"></div>';const n=i?new y(this.context,t,p.FOCUSED,L.CENTERED):new R(this.context,t,p.FOCUSED,L.RELATIVE);n.classList.add("focused-tile-content"),this.focusElement.append(n),this.context.settings.focusWrapper.classList.add("focused-wrapper"),this.context.settings.focusWrapper.append(this.focusElement),this.focusElement.addEventListener("click",(t=>{t.stopImmediatePropagation()})),null===(e=this.focusElement.querySelector(".close-button"))||void 0===e||e.addEventListener("click",(()=>{this.close()}))}))}};O=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-focused-tile"})],O);const M=(t,e,i="lazy",n)=>`<img src="${t}/assets/images/${e}.svg" loading="${i}" alt="${e}" ${n?`class="${n}"`:""} />`;let _=class extends HTMLElement{constructor(){super(...arguments),this.ATTRIBUTE_BASE_URL="baseUrl",this.ATTRIBUTE_RATING="rating",this.MIN_GRADE=0,this.MAX_GRADE=5,this.STAR_EMPTY="star-empty",this.STAR_FILLED="star-filled"}connectedCallback(){var t,e,i,n,s;return e=this,i=void 0,s=function*(){const e=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",i=+(null!==(t=this.getAttribute(this.ATTRIBUTE_RATING))&&void 0!==t?t:0);this.validate(i)&&this.render(e,i)},new((n=void 0)||(n=Promise))((function(t,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(o,a)}l((s=s.apply(e,i||[])).next())}))}validate(t){return!(isNaN(t)||t<this.MIN_GRADE||t>this.MAX_GRADE)}render(t,e){const i=Math.floor(e),n=e%1*100,s=M(t,this.STAR_EMPTY,"eager","empty"),r=M(t,this.STAR_FILLED,"eager");this.innerHTML=`\n      <div class="star-rating">\n        ${r.repeat(i)}\n        ${i!==this.MAX_GRADE?`\n              <div class="star-rating__fraction">\n                <div class="star">\n                  ${s}\n                </div>\n                <div class="star" style="width: ${n}%">\n                  ${r}\n                </div>\n              </div>\n              ${s.repeat(this.MAX_GRADE-i-1)}\n            `:""}\n      </div>\n    `}};_=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-star-rating"})],_);class ${constructor(t=[],e=100){this._tiles=t,this.baseWidthInPercent=e,this.index=0,this._orderedTiles=[],this.setOrderedTiles()}init(t,e){return this.index=t,this.getPage(e)}readjust(t,e){return this.index=t,this.setOrderedTiles(),this.getPage(e)}setOrderedTiles(){this._orderedTiles=[],this._tiles.forEach(((t,e)=>{this._orderedTiles.push([e,t])}))}left(t){return this.incrementIndex(-1*t.wasAllowedToScroll),this.getPage(t)}right(t){return this.incrementIndex(t.wasAllowedToScroll),this.getPage(t)}incrementIndex(t){const e=this.index+t;e>=this._tiles.length?this.index=e-this._tiles.length:e<0?this.index=this._tiles.length+e:this.index+=t}getPage(t){const e=this.toEnd(t.visibleTiles),i=e<t.visibleTiles&&0!==e?e:t.visibleTiles,n=i/t.visibleTiles*this.baseWidthInPercent*-1+-this.baseWidthInPercent/t.visibleTiles,s=this.index,r=this.baseWidthInPercent/t.visibleTiles,o=s>=t.visibleTiles||0===s?t.visibleTiles:s,a=(t.visibleTiles+1-o)*r*-1;return{index:this.index,tiles:[...this.getCarouselTiles(this.index-t.visibleTiles-1,3*t.visibleTiles+2,t.visibleTiles)],allowedToScrollNext:i,allowedToScrollPrevious:o,toPrevious:a,toNext:n}}getCarouselTiles(t,e,i){let n=[...this._orderedTiles];const s=t%this._orderedTiles.length;n=[...n.splice(s),...n];const r=[];for(let t=0;t<e;t++){const t=n.shift();if(!t)throw new Error("no first item");r.push(t),n=[...n,t]}return r.slice(i+1,2*i+2).filter((t=>void 0!==t))}toEnd(t){return this._tiles.length-(this.index+t)}setTiles(t){this._tiles=t,this.setOrderedTiles()}getTiles(){return this._tiles}}var D;!function(t){t.XXLARGE="xxlarge",t.XLARGE="xlarge",t.LARGE="large",t.MEDIUM="medium",t.SMALL="small"}(D||(D={}));const P=D;var U,N=i(840),k=i.n(N);function H(t,e,i,n=p.REDUCED,s=0,r){return t?new y(e,i,n,L.CENTERED,r,s):new R(e,i,n,L.RELATIVE,r,s)}function W(t){const{grades:{"365days":{rating:e,count:i},overall:{count:n}}}=t.grade;return{id:"grade",grade:e,count:i,overallCount:n}}!function(t){t.LEFT="left",t.RIGHT="right"}(U||(U={}));var G=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let j=class extends HTMLElement{constructor(){super(...arguments),this.allowedToScroll=!0,this.renderedTiles=new Map}connectedCallback(){return G(this,void 0,void 0,(function*(){const t=this.getRootNode();this.host=t.host,this.context=this.host.getContext(),this.carouselController=new $(this.context.reviews,100),this.page=this.carouselController.init(0,{visibleTiles:3,wasAllowedToScroll:0}),this.render(),this.carouselManager=this.initCarouselManager(),this.initCarouselGestures()}))}disconnectedCallback(){this.carouselManager.off("swipeleft"),this.carouselManager.off("swiperight")}update(t=!1){var e,i,n,s;return G(this,void 0,void 0,(function*(){const r=null!==(i=null===(e=this.displaySettings)||void 0===e?void 0:e.visibleTiles)&&void 0!==i?i:0,o=null!==(s=null===(n=this.displaySettings)||void 0===n?void 0:n.displaySize)&&void 0!==s?s:0;this.displaySettings=function(t){switch(!0){case t>=1360:return{displaySize:P.XXLARGE,visibleTiles:5};case t>=1102:return{displaySize:P.XLARGE,visibleTiles:4};case t>=860:return{displaySize:P.LARGE,visibleTiles:3};case t>=600:return{displaySize:P.MEDIUM,visibleTiles:2};default:return{displaySize:P.SMALL,visibleTiles:1}}}(this.carouselWrapper.parentElement.parentElement.offsetWidth),(r!==this.displaySettings.visibleTiles||o!==this.displaySettings.displaySize||t)&&(this.page=this.carouselController.readjust(0,{visibleTiles:this.displaySettings.visibleTiles,wasAllowedToScroll:this.displaySettings.visibleTiles}),this.context=this.host.getContext(),yield this.updateTiles())}))}scrollCarousel(t){return G(this,void 0,void 0,(function*(){if(!this.allowedToScroll)return;this.allowedToScroll=!1;const e=this.carouselController[t]({wasAllowedToScroll:t===U.LEFT?this.page.allowedToScrollPrevious:this.page.allowedToScrollNext,visibleTiles:this.displaySettings.visibleTiles});this.currentTransition=t===U.LEFT?-100:0;const i=yield this.renderTiles(e,!1,this.page,t),n=2*this.displaySettings.visibleTiles+1-i,s=t===U.LEFT?0:0===n?-100:100/this.displaySettings.visibleTiles*(this.displaySettings.visibleTiles-n)*-1;yield this.updatePage(e,s),this.allowedToScroll=!0}))}updatePage(t,e){return G(this,void 0,void 0,(function*(){this.page=t,this.currentTransition=yield this.moveTiles(this.currentTransition,e)}))}resetTiles(t=this.page,e=!1){return G(this,void 0,void 0,(function*(){this.renderTiles(t,e),this.currentTransition=yield this.moveTiles(0,0,!1)}))}renderTiles(t=this.page,e=!1,i,n){return G(this,void 0,void 0,(function*(){const s=[...new Set(n||i?n===U.LEFT?[...t.tiles,...i.tiles]:[...i.tiles,...t.tiles]:t.tiles)].map((([t,i])=>{if(this.renderedTiles.has(t)&&!e){const e=this.renderedTiles.get(t);return e.updateSize(this.displaySettings.displaySize),e}const n=function(t,e,i,n,s=0){return H(t,e,i,p.REDUCED,s,n)}("grade"===i.id,this.context,i,this.displaySettings.displaySize,t);return this.renderedTiles.set(t,n),n}));return this.carouselWrapper.replaceChildren(...s),this.isTileFullyVisible(s,n),s.length}))}updateTiles(){var t;return G(this,void 0,void 0,(function*(){const e=this.context.reviews,i=W(this.context),n=this.context.settings.fixedGradeBlock?e:[i,...e];this.carouselController.setTiles(n),this.page=this.carouselController.init(null!==(t=this.page.index)&&void 0!==t?t:0,{visibleTiles:this.displaySettings.visibleTiles,wasAllowedToScroll:0}),yield this.resetTiles(this.page,!0)}))}moveTiles(t,e,i=!0){return G(this,void 0,void 0,(function*(){const n=this.carouselWrapper.animate([{transform:`translateX(${t}%)`},{transform:`translateX(${e}%)`}],{duration:i?this.context.settings.animationDurationScroll:0,easing:"ease",fill:"both"});return yield n.finished,e}))}isTileFullyVisible(t,e=U.LEFT){const i=e===U.LEFT?0:t.length-this.displaySettings.visibleTiles-1,n=i+this.displaySettings.visibleTiles;t.forEach((t=>t.classList.remove("clickable"))),t.slice(i,n).forEach((t=>{t.classList.add("clickable")}))}initCarouselManager(){const t=new(k().Manager)(this.carouselWrapper),e=new(k().Swipe)({direction:k().DIRECTION_HORIZONTAL});return t.add(e),t}initCarouselGestures(){void 0!==this.carouselManager&&(this.carouselManager.on("swipeleft",(()=>{this.scrollCarousel(U.RIGHT)})),this.carouselManager.on("swiperight",(()=>{this.scrollCarousel(U.LEFT)})))}render(){this.classList.add("carousel"),this.innerHTML='\n      <div class="control-button left" onclick="this.parentNode.scrollCarousel(\'left\')">\n        <span></span>\n      </div>\n      <div class="carousel-scroll-wrapper">\n      </div>\n      <div class="control-button right" onclick="this.parentNode.scrollCarousel(\'right\')">\n        <span></span>\n      </div>';const t=document.createElement("div");t.classList.add("carousel-items"),this.carouselWrapper=t,this.querySelector(".carousel-scroll-wrapper").appendChild(t)}};j=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel"})],j);var B;!function(t){t.LIGHT="light",t.DARK="dark",t.OS="os"}(B||(B={}));const F=B;i(426);const z=t=>e=>{customElements.get(t.selector)||customElements.define(t.selector,e)},X=(t,e,i="lazy",n)=>`<img src="${t}/assets/images/${e}.svg" loading="${i}" alt="${e}" ${n?`class="${n}"`:""} />`;let Y=class extends HTMLElement{ATTRIBUTE_BASE_URL="baseUrl";ATTRIBUTE_RATING="rating";MIN_GRADE=0;MAX_GRADE=5;STAR_EMPTY="star-empty";STAR_FILLED="star-filled";async connectedCallback(){const t=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",e=+(this.getAttribute(this.ATTRIBUTE_RATING)??0);this.validate(e)&&this.render(t,e)}validate(t){return!(isNaN(t)||t<this.MIN_GRADE||t>this.MAX_GRADE)}render(t,e){const i=Math.floor(e),n=e%1*100,s=X(t,this.STAR_EMPTY,"eager","empty"),r=X(t,this.STAR_FILLED);this.innerHTML=`\n      <div class="star-rating">\n        ${r.repeat(i)}\n        ${i!==this.MAX_GRADE?`\n              <div class="star-rating__fraction">\n                <div class="star">\n                  ${s}\n                </div>\n                <div class="star" style="width: ${n}%">\n                  ${r}\n                </div>\n              </div>\n              ${s.repeat(this.MAX_GRADE-i-1)}\n            `:""}\n      </div>\n    `}};Y=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([z({selector:"etrusted-ig-star-rating"})],Y);let q=class extends HTMLElement{ATTRIBUTE_BASE_URL="baseUrl";ATTRIBUTE_LOCALE="locale";locale;baseUrl;wrapperElement;reviewWrapperElement;indicatorElement;dotSlider;slides;observer;_data;currentIndex=0;imageCount=0;translateContent;get data(){return this._data}set data(t){this._data=t,this.imageCount=this._data.review.images.length,this.render()}connectedCallback(){this.baseUrl=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",this.locale=this.getAttribute(this.ATTRIBUTE_LOCALE)||"",this.translateContent=c.bind(this,this.baseUrl,this.locale)}disconnectedCallback(){this.unobserveSlideVisibility()}show(t=0){this.currentIndex=t,this.wrapperElement.classList.add("show"),this.scrollToSlide(this.currentIndex)}hide(){this.wrapperElement.classList.remove("show")}showOverlay(t){this.reviewWrapperElement.classList.add("overlay"),t.stopPropagation()}hideOverlay(t){this.reviewWrapperElement.classList.remove("overlay"),t.stopPropagation()}scrollToSlide(t=0){const e=this.querySelector(`#slide-${t}`);e&&e.scrollIntoView()}previousSlide(){this.currentIndex=this.currentIndex>0?this.currentIndex-1:this.imageCount-1,this.scrollToSlide(this.currentIndex)}nextSlide(){this.currentIndex=this.currentIndex<this.imageCount-1?this.currentIndex+1:0,this.scrollToSlide(this.currentIndex)}async reportImage(t){const{channel:e,review:i}=this.data,n=i.id,s=new Date(i.date).toLocaleString("en-GB").substring(0,10),r=await this.translateContent("report.body"),o="-".repeat(40),a=e?`${e.tsId} / ${n} / ${t.id} / ${e.name}`:`${n} / ${t.id}`,l=`${t.url}\n${i.comment||""}`,c=`${i.rating}/5 - ${s}`,h=await this.translateContent("report.subject",{imageId:t.id}),d=`${r}\n\n${o}\n${a}\n\n${l}\n\n${c}`;window.open(`mailto:reviewservice@trustedshops.com?subject=${h}&body=${encodeURIComponent(d)}`)}observeSlideVisibility(){this.slides=this.querySelectorAll(".slide"),this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=.5&&(this.currentIndex=+t.target.id.split("-")[1],this.updateIndicator(this.currentIndex),this.updateThumbnailStyle(this.currentIndex),this.updateDotSlider(this.currentIndex))}))}),{threshold:.5}),this.slides.forEach((t=>{this.observer.observe(t)}))}unobserveSlideVisibility(){this.slides.forEach((t=>{this.observer.unobserve(t)})),this.observer.disconnect()}async updateIndicator(t=0){this.indicatorElement.innerHTML=await this.translateContent("gallery.of",{current:(t+1).toString(),total:this.imageCount.toString()})}updateDotSlider(t=0){Array.from(this.dotSlider.children).forEach(((e,i)=>{e.classList.remove("dot-highlighted"),i===t&&e.classList.add("dot-highlighted")}))}updateThumbnailStyle(t=0){this.querySelectorAll(".thumbnail").forEach(((e,i)=>{e.classList.remove("active"),i===t&&(e.classList.add("active"),e.scrollIntoView())}))}getImageSlider(){const{images:t}=this.data.review;return`<div class="image-slider">\n      <div\n        class="previous navigation mobile-hide"\n        onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.previousSlide()"\n      >\n        ${X(this.baseUrl,"chevron-left")}\n      </div>\n      <div class="slides">\n        ${t.map(((t,e)=>`<img id="slide-${e}" class="slide" src="${t.url}" alt="slide-image" />`)).join("")}\n      </div>\n      <div\n        class="next navigation mobile-hide"\n        onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.nextSlide()"\n      >\n        ${X(this.baseUrl,"chevron-right")}\n      </div>\n    </div>`}async getReview(){const{title:t,comment:e,consumer:i,rating:n,date:s,isVerified:r}=this.data.review,o=await this.translateContent("review.noUserComment"),a=await this.translateContent("review.writtenBy"),l=await this.translateContent("review.verified"),c=await this.translateContent("imported.long"),h=await this.translateContent("review.readMore"),d=!!t||!!e,u=i&&i.firstName,p=!!t&&!((t,e)=>!(!t||!e)&&t.startsWith(e?.substring(0,e.length-3)))(e,t);return`<div class="review" onclick="event.stopPropagation()">\n      <div class="row justify-center sticky-top close-overlay-wrapper">\n        <div class="col-auto">\n          <div class="close-overlay">&#x2715;</div>\n        </div>\n      </div>\n      <div\n        class="header"\n        onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.showOverlay(event)"\n      >\n        <div class="row align-center">\n          <div class="col rating">\n            <etrusted-ig-star-rating\n              baseUrl="${this.baseUrl}"\n              rating="${n}"\n            ></etrusted-ig-star-rating>\n          </div>\n          ${r?`<div class="col-auto verified">\n                  <span></span> ${l}\n                </div>`:`<div class="col-auto imported">\n                  ${c}\n                </div>`}\n        </div>\n        <div class="row">\n          <div class="col relative-time">\n            ${((t,e)=>{const i=new Intl.RelativeTimeFormat(t,{numeric:"auto"}),n=new Date,s=new Date(e),r=s.getTime()-n.getTime(),o=Math.trunc(r/1e3),a=Math.abs(o);let l=o,c="second";if(a>=60&&a<3600)l=Math.trunc(o/60),c="minute";else if(a>3600&&a<86400)l=Math.trunc(o/3600),c="hour";else if(a>=86400&&a<604800)l=Math.trunc(o/86400),c="day";else if(a>604800)return s.toLocaleDateString(t);return i.format(l,c)})(this.locale,s)}\n            ${u?`${a} ${i?.firstName||""}\n            ${i?.lastName||""}`:""}\n          </div>\n          <a class="col-auto mobile-show read-more">${h}</a>\n        </div>\n      </div>\n      <div class="row content mobile-hide">\n        <div class="col">\n          ${d?`\n              ${p?`<div class="title">${t||""}</div>`:""}\n              <div class="comment">${e||""}</div>\n            `:`<div class="disclaimer">${o}</div>`}\n        </div>\n      </div>\n    </div>`}getThumbnails(){const{images:t}=this.data.review;return`<div class="thumbnails mobile-hide">\n      ${t.map(((t,e)=>`<img\n            class="thumbnail"\n            src="${t.url}"\n            alt="thumbnail"\n            onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.scrollToSlide(${e})"\n          />`)).join("")}\n    </div>`}async getInformationBar(){const t=await this.translateContent("report.link");return` <div class="information-bar row align-center">\n      <div class="col">\n        <div class="close mobile-show">&#x2715;</div>\n      </div>\n      <div class="col text-center indicator">\n        ${this.currentIndex+1} of ${this.imageCount}\n      </div>\n      <div class="col">\n        <div class="row justify-right">\n          <div class="col-auto">\n            <a class="report-button" href="javascript:void(0)">\n              <span class="mobile-hide"> ${t} </span>\n              <span class="report-icon mobile-show">\n              </span>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>`}async render(){this.innerHTML=`\n      <div class="modal-wrapper" onclick="this.parentNode.hide()">\n        <div class="modal row" onclick="event.stopPropagation()">\n          <div class="gallery-wrapper">\n            ${this.getImageSlider()}\n            <div class="dot-slider mobile-show">\n              ${'<span class="dot"></span>'.repeat(this.imageCount)}\n            </div>\n            ${await this.getInformationBar()}\n          </div>\n          <div class="review-wrapper">\n            <div class="row justify-right mobile-hide">\n              <div class="col-auto">\n                <div class="close"></div>\n              </div>\n            </div>\n            ${await this.getReview()}\n            ${this.getThumbnails()}\n          </div>\n        </div>\n      </div>\n    `;const t=this.querySelector(".modal-wrapper");t&&(this.wrapperElement=t);const e=this.querySelector(".indicator");e&&(this.indicatorElement=e);const i=this.querySelector(".review-wrapper");i&&(this.reviewWrapperElement=i,this.reviewWrapperElement.onclick=t=>this.hideOverlay(t));const n=this.querySelector(".dot-slider");n&&(this.dotSlider=n);const s=this.querySelector(".report-button");s&&(s.onclick=()=>this.reportImage(this.data.review.images[this.currentIndex])),this.querySelectorAll(".close").forEach((t=>t.onclick=()=>this.hide()));const r=this.querySelector(".close-overlay");r&&(r.onclick=t=>this.hideOverlay(t)),this.observeSlideVisibility()}};q=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([z({selector:"etrusted-ig-modal"})],q);let V=class extends HTMLElement{alwaysUpdate;outsideModal;ATTRIBUTE_LOCALE="data-locale";ATTRIBUTE_BASE_URL="data-base-url";PAGE_SIZE=4;locale;baseUrl;modalElement;rootElement;_data;initialRender=!1;get data(){return this._data}set data(t){this._data=t,this.render()}constructor(t=!1,e){super(),this.alwaysUpdate=t,this.outsideModal=e}connectedCallback(){if(!this.initialRender){if(this.locale=this.getAttribute(this.ATTRIBUTE_LOCALE)||"",this.baseUrl=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",!this.locale||!this.baseUrl)throw new Error("'data-locale' and 'data-base-url' need to be provided");this.attachShadow({mode:"open"}),this.rootElement=this.addRootElement(),this.addCssStyle(this.baseUrl),this.render()}this.initialRender=!this.alwaysUpdate}showModal(t){this.modalElement.show(t)}addCssStyle(t){const e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=`@import "${t}/index.css"`,this.shadowRoot?.appendChild(e)}addRootElement(){const t=document.createElement("div");return t.classList.add("widget-image-gallery"),t.style.height="4.25em",t.style.display="flex",t.style.overflow="hidden",t.style.gap="0.5em",t.style.font="1em Helvetica, arial, sans-serif",t.style.fontSize="0.875em",this.shadowRoot?.appendChild(t),t}render(){if(!this.data)return;const{review:t}=this.data,{images:e}=t,i=e.length>=this.PAGE_SIZE;this.rootElement.innerHTML=`\n      ${e.slice(0,this.PAGE_SIZE).map(((t,e)=>`<img\n              style="height:100%"\n              class="thumbnail"\n              src="${t.url}"\n              loading="lazy"\n              alt="thumbnail"\n              onclick="this.getRootNode().host.showModal(${e})"\n            />`)).join("")}\n      ${i?`<div class="remaining-count" onclick="this.getRootNode().host.showModal(0)">\n              <span>+${e.length-this.PAGE_SIZE}</span>\n            </div>`:""}\n    `,this.modalElement||(this.outsideModal?this.modalElement=this.outsideModal:(this.modalElement=document.createElement("etrusted-ig-modal"),this.modalElement.setAttribute("baseUrl",this.baseUrl),this.modalElement.setAttribute("locale",this.locale))),this.outsideModal||this.rootElement.append(this.modalElement),this.modalElement.data={review:this.data.review}}};V=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([z({selector:"etrusted-widget-image-gallery"})],V);var Z,J=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let Q=Z=class extends HTMLElement{constructor(){super(...arguments),this.CURRENT_MAJOR_VERSION="v1",this.QUERY_SELECTOR_PROPS='script[type="text/props"]',this.ATTRIBUTE_LOCALE="data-etrusted-locale",this.ATTRIBUTE_THEME="data-theme",this.ATTRIBUTE_UGC="data-ugc",this.breakPoint=590,this.osThemeHost=window.matchMedia("(prefers-color-scheme: dark)"),this.themeListener=t=>{this.setToOsStyle(t.matches)},this.setToOsStyle=t=>{this.setAttribute(this.ATTRIBUTE_THEME,t?"dark":"light")},this.getManifest=()=>{var t;const e=null===(t=this.querySelector(this.QUERY_SELECTOR_PROPS))||void 0===t?void 0:t.textContent;return e?JSON.parse(e).manifest:null}}connectedCallback(){var t,e;return J(this,void 0,void 0,(function*(){const i=(null===(t=this.getRootNode())||void 0===t?void 0:t.host)||this,n=this.getAttribute(this.ATTRIBUTE_LOCALE),s=this.getAttribute(this.ATTRIBUTE_THEME),r=this.getAttribute(this.ATTRIBUTE_UGC),o="true"===r,a=this.getManifest();if(!a)return;const l=a.application.url.replace(this.CURRENT_MAJOR_VERSION,"1.17.2")||".";this.attachShadow({mode:"open"}),this.addCssStyle(l),this.rootElement=this.addRootElement();const h=d(a.configuration.url),u=d(a.feeds.channels.url),p=d(a.feeds.grades.url),v=d(a.feeds.review_carousel_service.url),f=yield(()=>J(this,void 0,void 0,(function*(){try{const[t,e,i,n]=yield Promise.all([h,u,p,v]),{locale:s,theme:r,showUGC:o,variant:a}=t;return{channel:e,grade:i,reviews:n,variant:a,configurationLocale:s,configurationTheme:r,configurationShowUGC:o}}catch(t){return}})))();if(!f)return;const{configurationLocale:m,configurationTheme:g,configurationShowUGC:y,variant:T,channel:E,grade:w,reviews:b}=f;if(b.length<5)return;yield c(l,null!=n?n:m,"verifiedCopy");const[x,R]=Z.initBaseElements(),S={variant:T,theme:null!==(e=null!=s?s:g)&&void 0!==e?e:F.LIGHT,locale:null!=n?n:m,showUGC:(r?o:y)||!1,focusWrapper:x,animationDurationScroll:750,animationDurationFocus:75,fixedGradeBlock:!1};this.context={baseUrl:l,manifest:a,channel:E,grade:w,reviews:b,settings:S},this.setAttribute(this.ATTRIBUTE_THEME,this.context.settings.theme),yield this.render(R,x),this.setupResizeObserver(this.rootElement,R),this.setupMutationObserver(i,R,x),this.handleOSStyleListener(this.context.settings.theme!==F.OS)}))}disconnectedCallback(){this.handleOSStyleListener(!0)}static initBaseElements(){return[new O,new j]}setupMutationObserver(t,e,i){const n=new MutationObserver((n=>{if(t!==this){let s=!1;n.forEach((e=>{const i=e.attributeName,n=t.getAttribute(i);if(i===this.ATTRIBUTE_THEME){const t=this.context.settings.theme;this.context.settings.theme=n,this.setAttribute(this.ATTRIBUTE_THEME,n),this.handleOSStyleListener(F.OS===t||F.OS!==this.context.settings.theme)}if(i===this.ATTRIBUTE_LOCALE&&(this.context.settings.locale=n,this.setAttribute(this.ATTRIBUTE_LOCALE,n),s=!0),i===this.ATTRIBUTE_UGC){const t="true"===n;this.context.settings.showUGC=t,this.setAttribute(this.ATTRIBUTE_UGC,n),s=!0}})),s&&(this.render(e,i),e.update(!0))}}));return n.observe(t,{attributes:!0}),n}setupResizeObserver(t,e){const i=new ResizeObserver((()=>{this.updateCarouselSettings(e)}));return i.observe(t),i}handleOSStyleListener(t=!1){if(this.context.settings.theme===F.OS||!t)return this.setToOsStyle(this.osThemeHost.matches),void this.osThemeHost.addEventListener("change",this.themeListener);this.osThemeHost.removeEventListener("change",this.themeListener)}getContext(){return this.context}setContext(t){this.context=t}addCssStyle(t){var e;const i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=`@import "${t}/index.css"`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(i)}addRootElement(){var t;const e=document.createElement("div");return e.classList.add("etrusted-review-carousel-service-widget"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),e}updateCarouselSettings(t){this.context.settings.fixedGradeBlock=this.rootElement.offsetWidth>this.breakPoint,this.handleFixedGradeBlock(),t.update()}handleFixedGradeBlock(){const t=this.rootElement.querySelector(".widget > etrusted-rc-carousel-grade-tile");t&&(t.style.display=this.context.settings.fixedGradeBlock?"flex":"none")}render(t,e){return J(this,void 0,void 0,(function*(){if(!this.shadowRoot)return;const i=function(t,e=p.REDUCED){return H(!0,t,W(t),e)}(this.context,p.REDUCED);this.widgetElement&&this.widgetElement.remove(),this.context.settings.showUGC&&(this.context.settings.focusGallery=document.createElement("etrusted-ig-modal"),this.context.settings.focusGallery.setAttribute("baseUrl",this.context.baseUrl),this.context.settings.focusGallery.setAttribute("locale",this.context.settings.locale)),this.widgetElement=document.createElement("div"),this.widgetElement.classList.add("widget"),this.widgetElement.appendChild(i),this.widgetElement.appendChild(t),this.widgetElement.appendChild(e),this.context.settings.focusGallery&&this.widgetElement.append(this.context.settings.focusGallery),this.rootElement.appendChild(this.widgetElement),this.updateCarouselSettings(t)}))}};Q=Z=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-review-carousel-service-widget"})],Q)})()})();